{% extends "base.html" %} 
{% block title %}Your Cart â€” Organic Store 
{% endblock title %} 
{% block extra_head %}
<style>
  .cart-container {
    padding: 60px 0;
  }

  .cart-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 15px;
  }

  .cart-table th {
    text-align: left;
    color: var(--organic-dark);
    font-weight: 600;
    padding-bottom: 10px;
  }

  .cart-table td {
    vertical-align: middle;
    background: #ffffffd9;
    padding: 15px;
    border-radius: 12px;
  }

  .cart-table img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 8px;
  }

  .quantity-input {
    width: 60px;
    padding: 5px;
    border-radius: 6px;
    border: 1px solid #ccc;
    text-align: center;
  }

  .btn-remove {
    background-color: #ff6b6b;
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 6px 12px;
    transition: 0.2s;
  }

  .btn-remove:hover {
    background-color: #e03f3f;
  }

  .cart-summary {
    background: #f4f9f4;
    padding: 25px;
    border-radius: 12px;
    margin-top: 20px;
  }

  .cart-summary h4 {
    font-family: "Caveat", cursive !important;
    color: var(--organic-dark);
    margin-bottom: 20px;
  }

  .btn-checkout {
    background-color: var(--organic-primary);
    color: #fff;
    border: none;
    border-radius: 8px;
    padding: 12px 25px;
    font-weight: 600;
    transition: 0.2s;
    width: 100%;
  }

  .btn-checkout:hover {
    background-color: var(--organic-dark);
    color: #fff;
  }

  @media (max-width: 768px) {
    .cart-table img {
      width: 60px;
      height: 60px;
    }

    .quantity-input {
      width: 50px;
    }
  }
  .order_status{
    border : 1px solid black;
    padding : 4px 6px;
    border-radius : 6px;
    color : black;
    font-weight: 600;
    background: rgb(165, 238, 165);
  }
</style>
{% endblock extra_head %} {% block content %}
<section class="container cart-container">
  <h2
    class="mb-4"
    style="font-family: 'Caveat', cursive; color: var(--organic-dark)">
    Your Orders
  </h2>

  {% if orders %} {% for order in orders %}
  <table class="cart-table mb-6">
    <div class="d-flex gap-4 justify-content-between">
      <div class="d-flex gap-3">
        <h2>{{ order.order_id }}</h2>
        <p class="order_status ">{{ order.status }}</p>
      </div>
      
        <form action="{% url 'store:cancel_order' order.id %}" method="post" onsubmit="return confirm('Are you sure you want to cancel this order?')">
          {% csrf_token %}
          <button type="submit" class="btn btn-sm btn-danger">Cancel order</button>
        </form>
      </div>
    <thead>
      <hr>
      <tr>
        <th>Product</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Subtotal</th>
      </tr>
    </thead>
    <tbody>
      {% for item in order.items.all %}
      <tr>
        <td>
          <div style="display: flex; align-items: center; gap: 10px">
            <img
              src="{{ item.product.image.url }}"
              alt="{{ item.product.name }}"
            />
            <span>{{ item.product.name }}</span>
          </div>
        </td>
        <td>RS.{{ item.product.price }}</td>
        <td>
            {{ item.quantity }}
        </td>
        <td>RS.{{ item.get_total_price }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% endfor %}

  <!-- CART SUMMARY
  <div class="cart-summary mt-4">
    <h4>Cart Summary</h4>
    <p>Total: <strong>RS.{{ cart_total|floatformat:2 }}</strong></p>
    <a href="{% url 'store:place_order' %}" class="btn-checkout"
      >Proceed to Checkout</a
    >
  </div> -->

  <!-- SHIPPING ADDRESS -->
  <div class="cart-summary mt-4">
    <h4>Shipping Address</h4>
    <p>{{ shipping_address }}</p>
  </div>

  {% else %}
  <p class="text-center">
    Your cart is empty.
    <a
      href="{% url 'store:products_page' %}"
      style="color: var(--organic-primary)"
      >Shop Now</a
    >
  </p>
  {% endif %}
</section>
{% endblock content %}
